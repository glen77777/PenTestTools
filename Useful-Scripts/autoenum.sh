#!/bin/bash
read -p "subnet to scan: " subnet
nmap -sV -O -sS -T4 $subnet -oG grepmap.txt
for server in $(grep Up grepmap.txt | cut -d " " -f 2);do
mkdir $server; nmblookup -A $server >> $server/nmb$server.txt; nmap -sU -sS --script=smb-enum-users -p U:137,T:139 $server -oA $server/smbuserenum$server; snmpenum -t $server >> $server/snmpenum$server.txt; nmap -sV -p 161 --script=snmp-info $server -oA $server/snmpinfo$server; nmap -v -p 1-65535 -sV -O -sS -sC -T4 $server -oA $server/fullscan$server; enum4linux $server >> $server/enum4lin$server.txt; nmap -T4 -v -oA $server/$server.shares --script smb-enum-shares --script-args smbuser=username,smbpass=password -p445 $server
done
